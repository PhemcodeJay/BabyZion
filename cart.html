<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shopping Cart - BABYZION MARKET</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" type="image/png" href="favicon.png">
  <meta property="og:title" content="BABYZION MARKET">
  <meta property="og:description" content="Adorable, safe & stylish baby clothes, toys, and essentials.">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body class="gradient">
  <header>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">Our Story</a></li>
        <li><a href="collections.html">Collections</a></li>
        <li><a href="products.html">Shop All</a></li>
        <li><a href="upload.html">Sell With Us</a></li>
        <li><a href="cart.html" class="active">ðŸ›’ Cart (<span class="cart-count">0</span>)</a></li>
      </ul>
    </nav>
    <div class="logo-container">
      <img src="logo.png" alt="BABYZION MARKET" class="header-logo">
    </div>
    <h1>Your Shopping Cart</h1>
    <p class="tagline">Review your baby items</p>
  </header>

  <main style="max-width:1200px; margin:40px auto; padding:20px;">
    <div class="grid" id="cart-items" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap:20px;"></div>
    
    <div class="card" id="cart-summary" style="margin-top:30px; max-width:400px; margin-left:auto;">
      <h2>Order Summary</h2>
      <div class="summary-row"><span>Subtotal:</span> <span id="subtotal">$0.00</span></div>
      <div class="summary-row"><span>Shipping:</span> <span id="shipping">$0.00</span></div>
      <div class="summary-row total"><span>Total:</span> <span id="total">$0.00</span></div>
      <button id="checkout-btn" class="button" style="width:100%; margin:10px 0;">Proceed to Checkout</button>
      <a href="products.html" class="button" style="width:100%;">Continue Shopping</a>
    </div>
  </main>

  <a href="https://wa.me/254703831957?text=Hi! I saw your baby items on BABYZION MARKET - can I order?" 
     class="whatsapp-float" target="_blank">Order Now</a>

  <footer>
    <p>Â© 2025 BABYZION MARKET â€¢ Made with love for little ones</p>
  </footer>

  <script src="cart.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const container = document.getElementById('cart-items');
      const subtotalEl = document.getElementById('subtotal');
      const shippingEl = document.getElementById('shipping');
      const totalEl = document.getElementById('total');
      const checkoutBtn = document.getElementById('checkout-btn');

      const SHIPPING = 12.00;

      const render = () => {
        const cart = JSON.parse(localStorage.getItem('babyzion_cart') || '[]');
        container.innerHTML = '';

        if (cart.length === 0) {
          container.innerHTML = '<div class="card" style="grid-column:1/-1;text-align:center;"><h3>Your cart is empty</h3><a href="products.html" class="button">Shop Now</a></div>';
          updateSummary(0, 0, 0);
          return;
        }

        cart.forEach(item => {
          const div = document.createElement('div');
          div.className = 'auto-product small-card';
          div.innerHTML = `
            <img src="${item.image}" alt="${item.name}">
            <h3>${item.name}</h3>
            <p>$${item.price.toFixed(2)} each</p>
            <div style="display:flex;gap:5px;justify-content:center;">
              <button class="button" data-id="${item.id}" data-action="decrease">-</button>
              <input type="number" value="${item.quantity}" min="1" style="width:50px;text-align:center;" data-id="${item.id}">
              <button class="button" data-id="${item.id}" data-action="increase">+</button>
            </div>
            <p>Subtotal: $${(item.price * item.quantity).toFixed(2)}</p>
            <button class="button remove" data-id="${item.id}" style="background:#ff4081;">Remove</button>
          `;
          container.appendChild(div);
        });

        const subtotal = cart.reduce((s, i) => s + i.price * i.quantity, 0);
        const shipping = subtotal > 0 ? SHIPPING : 0;
        const total = subtotal + shipping;
        updateSummary(subtotal, shipping, total);

        // Listeners
        container.querySelectorAll('[data-action]').forEach(btn => btn.onclick = () => {
          const id = btn.dataset.id;
          let qty = cart.find(i => i.id === id).quantity;
          qty = btn.dataset.action === 'increase' ? qty + 1 : qty - 1;
          if (qty > 0) {
            cart.find(i => i.id === id).quantity = qty;
            localStorage.setItem('babyzion_cart', JSON.stringify(cart));
            render();
          }
        });

        container.querySelectorAll('input[type=number]').forEach(input => input.onchange = () => {
          const qty = parseInt(input.value) || 1;
          cart.find(i => i.id === input.dataset.id).quantity = qty;
          localStorage.setItem('babyzion_cart', JSON.stringify(cart));
          render();
        });

        container.querySelectorAll('.remove').forEach(btn => btn.onclick = () => {
          if (confirm('Remove?')) {
            const newCart = cart.filter(i => i.id !== btn.dataset.id);
            localStorage.setItem('babyzion_cart', JSON.stringify(newCart));
            render();
          }
        });
      };

      const updateSummary = (sub, ship, tot) => {
        subtotalEl.textContent = `$${sub.toFixed(2)}`;
        shippingEl.textContent = ship > 0 ? `$${ship.toFixed(2)}` : 'FREE';
        totalEl.textContent = `$${tot.toFixed(2)}`;
      };

      checkoutBtn.onclick = () => {
        if (JSON.parse(localStorage.getItem('babyzion_cart') || '[]').length > 0) {
          window.location.href = 'shipping.html';
        }
      };

      render();
      document.querySelector('.cart-count').textContent = JSON.parse(localStorage.getItem('babyzion_cart') || '[]').reduce((s, i) => s + i.quantity, 0);
    });
  </script>

  <style>
    .summary-row { display: flex; justify-content: space-between; margin: 10px 0; }
    .total { font-weight: bold; font-size: 1.2rem; color: #ff6b9d; }
    .small-card { text-align: center; }
    @media (max-width: 768px) { .grid { grid-template-columns: 1fr; } }
  </style>
</body>
</html>